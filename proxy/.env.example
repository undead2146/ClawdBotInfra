# Custom Model Proxy Configuration - Multi-Provider Edition
# Route each Claude Code model tier to different providers!
#
# IMPORTANT: Copy this file to .env and fill in your actual values
# Never commit .env to version control!

# ============================================================================
# HAIKU PROVIDER (Z.AI - Recommended for cost savings)
# ============================================================================
# Z.AI provides GLM-4.7 at ~70x cheaper than Anthropic Haiku
# Get API key from: https://z.ai
HAIKU_PROVIDER_API_KEY=your_zai_api_key_here
HAIKU_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic

# ============================================================================
# OPUS PROVIDER 
# ============================================================================
OPUS_PROVIDER_API_KEY=your_opus_provider_api_key
OPUS_PROVIDER_BASE_URL=https://api.provider.com/v1

# ============================================================================
# SONNET PROVIDER
# ============================================================================
# Leave empty to use real Claude with your OAuth subscription
# Set to route Sonnet to custom provider
# SONNET_PROVIDER_API_KEY=your_sonnet_provider_api_key
# SONNET_PROVIDER_BASE_URL=https://api.provider.com/v1

# ============================================================================
# PROXY CONFIGURATION
# ============================================================================
PORT=8082

# Model name configuration - tells proxy what model names to expect from Claude Code
ANTHROPIC_DEFAULT_HAIKU_MODEL=glm-4.7
# ANTHROPIC_DEFAULT_OPUS_MODEL - leave unset to use real Claude Opus (your subscription)
# ANTHROPIC_DEFAULT_SONNET_MODEL - leave unset to use real Claude Sonnet (your subscription)

# Timeout configuration (optional, defaults shown)
# CONNECT_TIMEOUT=10      # Connection timeout in seconds
# READ_TIMEOUT=300        # Read timeout (per chunk for streaming) in seconds
# WRITE_TIMEOUT=30        # Write timeout in seconds
# POOL_TIMEOUT=5          # Connection pool timeout in seconds

# Retry configuration (optional, defaults shown)
# MAX_RETRIES=3           # Maximum retry attempts for failed requests
# BASE_RETRY_DELAY=1.0    # Initial retry delay in seconds (uses exponential backoff with jitter)
# MAX_RETRY_DELAY=60.0    # Maximum retry delay cap in seconds

# Concurrency control (optional, defaults shown)
# MAX_CONCURRENT_REQUESTS=5  # Maximum concurrent requests per provider (prevents overwhelming)

# Connection pool limits (optional, defaults shown)
# MAX_CONNECTIONS=100          # Total connections across all hosts
# MAX_KEEPALIVE_CONNECTIONS=20 # Keep-alive pool size
# KEEPALIVE_EXPIRY=30.0        # Time to keep idle connections (seconds)

# ============================================================================
# EXAMPLE 1: GLM for Haiku only, Claude for Opus/Sonnet (recommended)
# ============================================================================
# Best setup with Claude subscription - use real Claude for quality, GLM for cost
# HAIKU_PROVIDER_API_KEY=your_glm_api_key
# HAIKU_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic
#
# # Opus uses real Claude (OAuth) - no config needed
# # Sonnet uses real Claude (OAuth) - no config needed

# ============================================================================
# EXAMPLE 2: GLM for all tiers (no Claude subscription needed)
# ============================================================================
# HAIKU_PROVIDER_API_KEY=your_glm_api_key
# HAIKU_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic
#
# OPUS_PROVIDER_API_KEY=your_glm_api_key
# OPUS_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic
#
# SONNET_PROVIDER_API_KEY=your_glm_api_key
# SONNET_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic

# ============================================================================
# OAUTH CONFIGURATION (for Anthropic API access)
# ============================================================================
# When SONNET_PROVIDER is not set, the proxy uses Anthropic OAuth for Sonnet
# OAuth token is automatically read from: %USERPROFILE%\.claude\.credentials.json
# Path in JSON: claudeAiOauth.accessToken
#
# Requirements:
# - Active Claude Pro subscription
# - Logged into Claude Code on this machine
# - Token is personal and expires periodically
# - Each PC needs its own OAuth login
#
# NOTE: No configuration needed here - OAuth is automatic!
